@use '../../core/styles/index' as sbb;

// Box-sizing rules contained in typography are not traversing Shadow DOM boundaries. We need to include box-sizing mixin in every component.
@include sbb.box-sizing;

:host {
  display: flex;
}

:host(:where(:not(:last-of-type))) {
  .sbb-form-field__wrapper::after {
    content: '';
    position: absolute;
    border-block-end: var(--sbb-border-width-1x) var(--sbb-form-field-border-style)
      var(--sbb-color-cloud);
    inset-inline: var(--sbb-form-field-padding-inline);
    inset-block-end: 0;
  }
}

:host(:first-of-type) {
  sbb-icon {
    rotate: 90deg;
  }
}

:host(:last-of-type) {
  sbb-icon {
    rotate: -90deg;
    translate: #{sbb.px-to-rem-build(-1)} 0; // the 'route-circle-start-small' is not perfectly symmetrical
  }
}

sbb-icon {
  align-self: center;
  margin-inline-start: var(--sbb-spacing-responsive-xxxs);

  &::after {
    --connecting-line-offset: #{sbb.px-to-rem-build(3)}; // the 'route-circle-start-small' as a blank space, at the end of the line, that needs to be covered.
    --connecting-line-width: calc(
      (var(--sbb-form-field-min-height) - var(--sbb-icon-svg-height)) / 2
    );

    content: '';
    position: absolute;
    top: 50%;
    border-top: 1px solid var(--sbb-color-black);
    width: calc(var(--connecting-line-width) + var(--connecting-line-offset));
    margin-left: calc(var(--connecting-line-offset) * -1);
  }
}

.sbb-form-field__space-wrapper {
  flex-grow: 1;
}
