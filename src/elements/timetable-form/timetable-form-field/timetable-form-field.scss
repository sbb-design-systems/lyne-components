@use '../../core/styles/index' as sbb;

// Box-sizing rules contained in typography are not traversing Shadow DOM boundaries. We need to include box-sizing mixin in every component.
@include sbb.box-sizing;

:host {
  display: flex;

  --sbb-form-field-border-radius: var(--sbb-border-radius-6x);
  --sbb-form-field-outline-offset: #{sbb.px-to-rem-build(-5)};
}

:host(:first-of-type) {
  --sbb-timetable-form-field-route-icon-rotate: 90deg;
}

:host(:last-of-type) {
  --sbb-timetable-form-field-route-icon-rotate: -90deg;
  --sbb-timetable-form-field-route-icon-translate: #{sbb.px-to-rem-build(-1)} 0; // the 'route-circle-start-small' is not perfectly symmetrical
}

:host(:where(:not(:last-of-type))) {
  .sbb-form-field__wrapper::after {
    content: '';
    position: absolute;
    border-block-end: var(--sbb-border-width-1x) var(--sbb-form-field-border-style)
      var(--sbb-color-cloud);
    inset-inline: var(--sbb-form-field-padding-inline);
    inset-block-end: 0;
  }
}

.sbb-timetable-form-field__route-icon {
  align-self: center;
  margin-inline-start: var(--sbb-form-field-padding-inline);
  rotate: var(--sbb-timetable-form-field-route-icon-rotate);
  translate: var(--sbb-timetable-form-field-route-icon-translate);

  &::after {
    --connecting-line-offset: #{sbb.px-to-rem-build(3)}; // the 'route-circle-start-small' has a gap, at the end of the line, that needs to be covered.
    --connecting-line-width: calc(
      (var(--sbb-form-field-min-height) - var(--sbb-icon-svg-height)) / 2 +
        var(--connecting-line-offset)
    );

    content: '';
    position: absolute;
    top: 50%;
    border-top: 1px solid var(--sbb-color-black);
    width: var(--connecting-line-width);
    margin-left: calc(var(--connecting-line-offset) * -1);
  }
}

.sbb-form-field__space-wrapper {
  flex-grow: 1;
}
