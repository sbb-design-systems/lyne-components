@use '../core/functions';
@use '../core/mediaqueries';
@use './a11y';
@use './buttons';
@use './typo';

// -----------------------------------------------------------------------------
// Card: Mixins & CSS custom properties
// -----------------------------------------------------------------------------
@mixin card-variables--global($theme: 'standard') {
  @include card-variables--white;

  --sbb-card-border-radius: var(--sbb-border-radius-4x);
  --sbb-card-animation-easing: var(--sbb-animation-easing);
  --sbb-card-border-style: solid;
  --sbb-card-padding-inline-default: #{functions.theme-pattern-select(
      (
        'standard': var(--sbb-spacing-responsive-s),
        'lean': var(--sbb-spacing-responsive-xxs),
      ),
      $theme
    )};
  --sbb-card-padding-block-default: #{functions.theme-pattern-select(
      (
        'standard': var(--sbb-spacing-responsive-xxxs),
        'lean': var(--sbb-spacing-fixed-3x),
      ),
      $theme
    )};
  --sbb-card-with-badge-padding-block-default: #{functions.theme-pattern-select(
      (
        'standard': var(--sbb-spacing-fixed-6x) var(--sbb-spacing-responsive-xxxs),
        'lean': var(--sbb-spacing-fixed-6x) var(--sbb-spacing-fixed-3x),
      ),
      $theme
    )};
}

@mixin card-variables--global-forced-colors {
  --sbb-card-border-color: CanvasText;
  --sbb-card-border-width: var(--sbb-border-width-2x);
}

@mixin card-variables($theme: 'standard') {
  @include card-variables--global($theme);

  @include a11y.if-forced-colors {
    @include card-variables--global-forced-colors;
  }
}

@mixin card-variables--white {
  --sbb-card-background-color: var(--sbb-background-color-1);
  --sbb-card-border-color: transparent;
}

@mixin card-variables--milk {
  --sbb-card-background-color: var(--sbb-background-color-3);
  --sbb-card-border-color: transparent;
}

@mixin card-variables--transparent-bordered {
  --sbb-card-background-color: transparent;
  --sbb-card-border-color: var(--sbb-border-color-4-inverted);
  --sbb-card-border-width: var(--sbb-border-width-1x);
  --sbb-focus-outline-color: inherit;
}

@mixin card-variables--transparent-bordered-dashed {
  --sbb-card-background-color: transparent;
  --sbb-card-border-color: light-dark(var(--sbb-color-cement), var(--sbb-color-granite));
  --sbb-card-border-width: var(--sbb-border-width-1x);
  --sbb-card-border-style: dashed;
  --sbb-focus-outline-color: inherit;
}

@mixin card-variables--active {
  --sbb-card-border-color: var(--sbb-border-color-3);
  --sbb-card-border-width: var(--sbb-border-width-2x);
  --sbb-card-border-style: solid;

  @include a11y.if-forced-colors {
    --sbb-card-border-color: Highlight;
  }
}

// Card sizing
@mixin card-variables--spacing-default {
  --sbb-card-padding-block: var(--sbb-card-padding-block-default);
  --sbb-card-with-badge-padding-block: var(--sbb-card-with-badge-padding-block-default);
  --sbb-card-padding-inline: var(--sbb-card-padding-inline-default);
}

@mixin card-variables--spacing-3x-xxs {
  --sbb-card-padding-block: var(--sbb-spacing-fixed-3x);
  --sbb-card-with-badge-padding-block: var(--sbb-spacing-fixed-6x) var(--sbb-spacing-fixed-3x);
  --sbb-card-padding-inline: var(--sbb-spacing-responsive-xxs);
}

@mixin card-variables--spacing-xxxs-xxs {
  --sbb-card-padding-block: var(--sbb-spacing-responsive-xxxs);
  --sbb-card-with-badge-padding-block: var(--sbb-spacing-fixed-6x)
    var(--sbb-spacing-responsive-xxxs);
  --sbb-card-padding-inline: var(--sbb-spacing-responsive-xxs);
}

@mixin card-variables--spacing-xxxs-s {
  --sbb-card-padding-block: var(--sbb-spacing-responsive-xxxs);
  --sbb-card-with-badge-padding-block: var(--sbb-spacing-fixed-6x)
    var(--sbb-spacing-responsive-xxxs);
  --sbb-card-padding-inline: var(--sbb-spacing-responsive-s);
}

@mixin card-variables--spacing-4x-xxs {
  --sbb-card-padding-block: var(--sbb-spacing-fixed-4x);
  --sbb-card-with-badge-padding-block: var(--sbb-spacing-fixed-6x) var(--sbb-spacing-fixed-4x);
  --sbb-card-padding-inline: var(--sbb-spacing-responsive-xxs);
}

@mixin card-variables--spacing-xxs {
  --sbb-card-padding-block: var(--sbb-spacing-responsive-xxs);
  --sbb-card-with-badge-padding-block: var(--sbb-spacing-fixed-6x) var(--sbb-spacing-responsive-xxs);
  --sbb-card-padding-inline: var(--sbb-spacing-responsive-xxs);
}

@mixin card-variables--spacing-s {
  --sbb-card-padding-block: var(--sbb-spacing-responsive-s);
  --sbb-card-with-badge-padding-block: var(--sbb-spacing-responsive-s);
  --sbb-card-padding-inline: var(--sbb-spacing-responsive-s);
}

@mixin card-variables--spacing-l {
  --sbb-card-padding-block: var(--sbb-spacing-responsive-l);
  --sbb-card-with-badge-padding-block: var(--sbb-spacing-responsive-l);
  --sbb-card-padding-inline: var(--sbb-spacing-responsive-l);
}

@mixin card-variables--button {
  @include a11y.if-forced-colors {
    --sbb-card-color: ButtonText;
  }
}

@mixin card-variables--link {
  @include a11y.if-forced-colors {
    --sbb-card-color: LinkText;
    --sbb-card-border-color: CanvasText;
  }
}

@mixin card {
  // As the card has always a white/milk background, we have to fix the focus outline color
  // to default color for cases where the card is used in a negative context.
  --sbb-focus-outline-color: light-dark(
    var(--sbb-focus-outline-color-default),
    var(--sbb-focus-outline-color-dark)
  );

  // Propagate card text color to title text color to ensure correct color in forced colors mode
  --sbb-title-text-color-normal-override: var(--sbb-card-color);
  --sbb-card-animation-duration: var(
    --sbb-disable-animation-duration,
    var(--sbb-animation-duration-1x)
  );

  display: block;
  position: relative;
  padding-inline: var(--sbb-card-padding-inline);
  padding-block: var(--sbb-card-padding-block);
  border-radius: var(--sbb-card-border-radius);
  background-color: var(--sbb-card-background-color);
  box-shadow: none;
  transition: box-shadow var(--sbb-card-animation-duration) var(--sbb-card-animation-easing);
  color: var(--sbb-card-color);

  // Apply border as after element to let it be inline
  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background-color: transparent;
    border: var(--sbb-card-border-width) var(--sbb-card-border-style) var(--sbb-card-border-color);
    border-radius: var(--sbb-card-border-radius);
    pointer-events: none;
  }
}

@mixin card--hover {
  @include mediaqueries.hover-mq($hover: true) {
    --sbb-card-hover-shift: #{functions.px-to-rem-build(-2)};

    box-shadow: var(--sbb-box-shadow-level-9-hard);

    @include a11y.if-forced-colors {
      --sbb-card-border-color: Highlight;
    }
  }
}

@mixin card--wrapper {
  display: block;
  height: 100%;
}
