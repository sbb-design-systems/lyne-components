@use '@sbb-esta/lyne-elements/core/styles' as sbb;

:host {
  --reservation-place-control-rotation: var(--place-control-rotation-from-host, 0);
  --reservation-place-control-text-rotation: var(--place-control-text-rotation-from-host, 0);
  --reservation-place-control-text-size: calc(var(--place-control-text-scale-from-host, 1) * 0.5);
  --reservation-place-control-seat-text-offset-horizontal: calc(
    cos(var(--reservation-place-control-text-rotation) * 1deg) * 3%
  );

  display: inline-block;
}

.sbb-seat-reservation-place-control {
  $root: &;

  position: relative;
  transform-origin: center;
  transform: rotate(calc(var(--reservation-place-control-rotation) * 1deg));

  &__button {
    @include sbb.button-reset;

    display: block;
    font-size: calc(var(--reservation-place-control-text-size) * 1rem);
    transition: transform 0.25s ease-in-out;

    #{$root}--state-free &,
    #{$root}--state-selected & {
      cursor: pointer;

      &:hover {
        transform: scale(1.2);
      }
    }

    #{$root}--state-allocated &,
    #{$root}--state-restricted & {
      cursor: not-allowed;
    }
  }

  &__text {
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    font-size: 0.75em;
    line-height: 1;
    font-weight: lighter;
    letter-spacing: -0.0625em;
    text-align: center;
    text-indent: calc(cos(var(--reservation-place-control-text-rotation) * 1deg) * -10%);
    transform-origin: center center;
    transform: translate(-50%, -50%)
      rotate(calc(var(--reservation-place-control-text-rotation) * 1deg));

    #{$root}--state-free &,
    #{$root}--state-allocated & {
      display: block;
    }

    #{$root}--state-restricted#{$root}--type-bicycle & {
      display: block;
    }

    #{$root}--type-seat & {
      left: calc(50% - var(--reservation-place-control-seat-text-offset-horizontal));
    }

    #{$root}--type-bicycle & {
      top: 65%;
    }

    #{$root}--state-allocated &,
    #{$root}--state-restricted & {
      color: var(--sbb-color-smoke);
    }
  }
}
